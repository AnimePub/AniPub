<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home | AniPub ‚Äì Stream Anime Free in HD</title>
    <meta name="description" content="Home Page - A Free Anime Watching Site built by Anime Lovers for Anime Lovers">
    <meta name="keywords" content="anime, anime streaming, watch anime online, hianime, anilab, gogoanime, 9anime, zoro, aniplex, AniPub">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@400;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/newHome.css">

</head>

<body>
<header class="header">
    <a href="/Home" class="logo-wrap">
        <div class="logo-icon">
              <img style="height: 100%; width: 100%; background-color:rgb(6, 9, 15);" src="https://www.anipub.xyz/Logo-1-AniPub.png" alt="AniPub Logo">
        </div>
        <div class="logo-txt">
            <div class="logo-name">Ani<em>Pub</em></div>
            <div class="logo-sub">Yamate Kudasai</div>
        </div>
    </a>

    <div class="search-wrap">
        <input type="text" class="search-inp searchbox" placeholder="Search anime..." autocomplete="off">
        <button class="search-btn search-button" title="Search">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 21l-4.35-4.35M17 11A6 6 0 1 1 5 11a6 6 0 0 1 12 0z" stroke="#fff" stroke-width="2.5" stroke-linecap="round" fill="none"/>
            </svg>
        </button>
        <div class="search-results SBOX">
            <div class="sbf" style="display: none; flex-direction: column;"></div>
        </div>
    </div>

    <div class="nav-right">
        <a href="/Random"><button class="rand-btn random">Random</button></a>
        <% if(auth === true) { %>
              <% const LinkPr =  Link;
                            const PrArray = LinkPr.split("https://");
                            let PrLink = "";
                            if(PrArray.length > 1){
                                PrLink = "https://" + PrArray[1]; 
                            }
                            else {
                                 PrLink= "/ProfilePic/"+PrArray[0]
                            } %> 
            <button class="prof-btn profile-icon" title="Profile Menu">
                <img src="<%= PrLink %>" alt="Profile">
            </button>
        <% } else {%>
            <button class="prof-btn profile-icon" title="Profile Menu">
                <img src="<%= Link %>" alt="Profile">
            </button>
        <% } %>
    </div>

    <button class="ham" id="ham" onclick="toggleNav()" aria-label="Menu">
        <span></span><span></span><span></span>
    </button>
</header>

<!-- Mobile Nav -->
<div class="mob-nav" id="mobnav">
    <div class="search-wrap">
        <input type="text" class="search-inp searchbox" placeholder="Search anime..." autocomplete="off">
        <button class="search-btn search-button" title="Search">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 21l-4.35-4.35M17 11A6 6 0 1 1 5 11a6 6 0 0 1 12 0z" stroke="#fff" stroke-width="2.5" stroke-linecap="round" fill="none"/>
            </svg>
        </button>
    </div>
    <div class="nav-right">
           <div class="search-results SBOX">
            <div class="sbf" style="display: none; flex-direction: column;"></div>
        </div>
        <a href="/Random"><button class="rand-btn random">Random</button></a>
        <% if(auth === true) { %>
              <% const LinkPr =  Link;
                            const PrArray = LinkPr.split("https://");
                            let PrLink = "";
                            if(PrArray.length > 1){
                                PrLink = "https://" + PrArray[1]; 
                            }
                            else {
                                 PrLink= "/ProfilePic/"+PrArray[0]
                            } %> 
          <a style="text-decoration: none;" href="/Random">   <button class="prof-btn profile-icon" title="Profile Menu">
                <img src="<%= PrLink %>" alt="Profile">
            </button></a>
        <% } else {%>
         <a style="text-decoration: none;" href="/Profile">  <button class="prof-btn profile-icon" title="Profile Menu">
                <img src="<%= Link %>" alt="Profile"></a> 
            </button>
        <% } %>
    </div>
</div>


<div class="slider">
    <% DBAnime.forEach((value, i) => { %>
        <div class="slide <%= i === 0 ? 'active' : '' %>" data-slide="<%=i%>">
            <div class="slide-bg">
                <% const POSTER = value.Cover;
                   const POSTERARY = POSTER.split("https://");
                   let LINKU = "";
                   if(POSTERARY.length > 1){
                       LINKU = "https://" + POSTERARY[1];
                   } else {
                       LINKU= "/"+POSTERARY[0]
                   }
                %>
                <img src="<%=LINKU%>" alt="<%=value.Name%> Cover">
            </div>
            <div class="slide-overlay"></div>

            <div class="slide-content">
                <div class="slide-badge">
                    üî• Number <%=i+1%> in the List
                </div>

                <h1 class="slide-title"><%=value.Name%></h1>

                <div class="slide-meta">
                    <span class="meta-tag"><%= value.Duration %></span>
                    <span class="meta-tag"><%= value.Aired %></span>
                    <% if (value.ep.length === 0) {%>
                        <span class="meta-tag">EP1</span>
                    <% } else {%>
                        <% const ehe = value.ep.length + 1 %>
                        <span class="meta-tag">EP<%=ehe%></span>
                    <% } %>
                </div>

                <p class="slide-desc">
                    <% const deSC = value.DescripTion;
                       const desCA = deSC.split("");
                       let TEXT = "";
                       for (let i = 0; i < 170; i++) {
                           TEXT += desCA[i];
                       }
                    %>
                    <%= TEXT %>...
                </p>

                <div class="slide-btns">
                   <a href="/AniPlayer/<%=value.finder%>/0"> <button class="slide-btn primary watch-button" data-ANIMEID="<%=value.id%>">
                        <img src="/play-svgrepo-com.svg" alt="">
                        Watch Now
                    </button></a>
                    <button class="slide-btn secondary watch-list" data-ANIMEID="<%=value.id%>">
                        <img src="/plus-large-svgrepo-com.svg" alt="">
                        Add to List
                    </button>
                    <a href="/details/<%=value.finder%>" class="slide-btn secondary" style="text-decoration: none;">
                        <img src="/info_24dp_000000_FILL0_wght400_GRAD0_opsz24.svg" alt="">
                        Details
                    </a>
                </div>
            </div>
        </div>
    <% }); %>

    <!-- Slider Navigation -->
    <div class="slider-nav">
        <button class="slider-arrow" onclick="prevSlide()">‚ùÆ</button>
        <div class="slider-dots" id="sliderDots">
            <% DBAnime.forEach((value, i) => { %>
                <div class="dot <%= i === 0 ? 'active' : '' %>" onclick="goToSlide(<%=i%>)"></div>
            <% }); %>
        </div>
        <button class="slider-arrow" onclick="nextSlide()">‚ùØ</button>
    </div>
</div>

<section class="genre-sec">
    <div class="sec-head">
        <div class="sec-bar"></div>
        <p>Browse by Genre</p>
    </div>
    <div class="genre-grid">
        <% const GENRES = [
            "action","adventure","comedy","drama","fantasy","horror","mystery","romance","sci-fi","slice of life",
            "sports","supernatural","thriller","psychological","isekai","mecha","music","school","shounen","seinen"
        ]; %>
        <% GENRES.forEach((g)=>{ %>
            <a class="genre-chip" href="/Search?genre=<%=encodeURIComponent(g)%>" title="Search <%=g%>">
                <span><%=g%></span>
            </a>
        <% }) %>
    </div>
</section>




<section class="airing-section">
    <!-- Section Header -->
    <div class="sec-head">
        <div class="sec-bar"></div>
        <a href="/search/q?type=airing" style="text-decoration: none; color: inherit;">
            <p>Airing</p>
        </a>
    </div>

    <!-- Grid Container -->
    <div class="airing-grid">
        <% Airing.forEach(value => {%>
            <a href="/AniPlayer/<%=value.finder%>/0" class="airing-card">
                <!-- Card Image -->
                <div class="airing-card-img">
                    <% const POSTER = value.ImagePath;
                       const POSTERARY = POSTER.split("https://");
                       let LINKU = "";
                       if(POSTERARY.length > 1){
                           LINKU = "https://" + POSTERARY[1];
                       } else {
                           LINKU= "/"+POSTERARY[0]
                       }
                    %>
                    <img src="<%=LINKU%>" alt="<%=value.Name%> Poster">
                </div>
                
                <!-- Card Body -->
                <div class="airing-card-body">
                    <div class="airing-card-title"><%=value.Name%></div>
                    <div class="airing-card-rating">
                        <span class="airing-rating-num"><%=value.MALScore%></span>
                        <img class="airing-rating-stars" src="/rating-<%=value.RatingsNum%>.png" alt="Rating">
                    </div>
                    <p class="airing-card-desc">
                        <% const desc = value.DescripTion;
                           const descr = desc.slice(0,60);
                        %>
                        <%=descr%>...
                    </p>
                </div>
            </a>
        <% }); %>
    </div>
</section>




<!-- 
     RECENT ‚Äî GRID -->
<section class="recent-sec">
    <div class="sec-head">
        <div class="sec-bar"></div>
        <a href="/search/q?type=all" style="text-decoration: none; color: inherit;">
            <p>Recent</p>
        </a>
    </div>

    <div class="recent-grid">
        <% Anime.forEach(value => {%>
            <a href="/AniPlayer/<%=value.finder%>/0" class="recent-card">
                <div class="recent-card-img">
                    <% const POSTER = value.ImagePath;
                       const POSTERARY = POSTER.split("https://");
                       let LINKU = "";
                       if(POSTERARY.length > 1){
                           LINKU = "https://" + POSTERARY[1];
                       } else {
                           LINKU= "/"+POSTERARY[0]
                       }
                    %>
                    <img src="<%=LINKU%>" alt="<%=value.Name%> Poster">
                </div>
                <div class="recent-card-body">
                    <div class="recent-card-title"><%=value.Name%></div>
                    <div class="recent-card-rating">
                        <span class="rating-num"><%=value.MALScore%></span>
                        <img class="rating-stars" src="rating-<%=value.RatingsNum%>.png" alt="Rating">
                    </div>
                    <p class="recent-card-desc">
                       <% const desc = value.DescripTion;
   const descr = desc && desc.length > 60 ? desc.slice(0, 60) : desc;
%>
<%=descr%><% if(desc && desc.length > 60) { %>...<% } %>
                    </p>
                </div>
            </a>
        <% }); %>
    </div>
</section>
 <%- include("./include/footer") %>

<script>
    /* ‚îÄ‚îÄ Mobile Nav ‚îÄ‚îÄ */
    function toggleNav() {
        const n = document.getElementById('mobnav');
        const h = document.getElementById('ham');
        const o = n.classList.toggle('open');
        h.classList.toggle('open', o);
    }
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            document.getElementById('mobnav').classList.remove('open');
            document.getElementById('ham').classList.remove('open');
        }
    });

    /* ‚îÄ‚îÄ Hero Slider ‚îÄ‚îÄ */
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.dot');

    function showSlide(n) {
        slides.forEach(s => s.classList.remove('active'));
        dots.forEach(d => d.classList.remove('active'));

        if (n >= slides.length) currentSlide = 0;
        if (n < 0) currentSlide = slides.length - 1;

        slides[currentSlide].classList.add('active');
        dots[currentSlide].classList.add('active');
    }

    function nextSlide() {
        currentSlide++;
        showSlide(currentSlide);
    }

    function prevSlide() {
        currentSlide--;
        showSlide(currentSlide);
    }

    function goToSlide(n) {
        currentSlide = n;
        showSlide(currentSlide);
    }

    // Auto-advance every 5 seconds
    setInterval(nextSlide, 5000);

    /* ‚îÄ‚îÄ Airing Horizontal Scroll ‚îÄ‚îÄ */
    function scrollAiring(dir) {
        const track = document.getElementById('airingTrack');
        const scrollAmount = 320;
        if (dir === 'left') {
            track.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        } else {
            track.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        }
    }
</script>


<script src="/playListUP.js"></script>
<script src="/home.js"></script>
<script>
    document.querySelectorAll(".slide-title").forEach((value,i)=>{
        let alu = value.innerText ;
        if(alu.length > 30) {
            console.log("Hi")
              document.querySelectorAll(".slide-title")[i].style.fontSize = "26px";
        }
    })
</script>
<script type="module" src="/ANiPlayer-render.js"></script>

</body>
</html>
